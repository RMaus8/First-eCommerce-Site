<% include ../../partials/header %>

<div class="row">
    <div class="col-sm-6 col-md-4 col-md-offset-4 col-sm-offset-3">
        <div id="success" class="alert alert-success" 
        <%if(noMessage){%>
            hidden
        <%}%>
            >
            <%=successMsg%>
        </div>
    </div>
</div>


    <header class="jumbotron">
        <div class="container">
            <h1>Gifts</h1>
            <% if(currentUser && currentUser.isAdmin){ %>
            <a class="btn btn-primary" href="/products/gifts/new">Add a new product</a>
            <% } %>
            <p>
                <form class="form-inline" action="/products/gifts" method="GET">
                    <div class="form-group searchCont">
                        <input id="searchBar" type="text" name="search" placeholder="Search Products" class="form-control">
                        <input type="submit" value="Search" class="btn btn-default">
                    </div>
                </form>
            </p>
        </div>
    </header>
    <div id="pagebar" class="row text-center">
        <% if (pages && pages > 0) { %>
        <ul class="pagination text-center">
            <% if (current == 1) { %>
            <li class="disabled"><a>First</a></li>
            <% } else { %>
            <li><a href="/products/gifts/<%if(search){%>?search=<%=search%><%}%>">First</a></li>
            <% } %>
     
            <% if (current == 1) { %>
            <li class="disabled"><a>«</a></li>
            <% } else { %>
            <li><a href="/products/gifts?page=<%= Number(current) - 1 %><%if(search){%>&search=<%=search%><%}%>">«</a></li>
            <% } %>
     
            <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
            <% if (i !== 1) { %>
            <li class="disabled"><a>...</a></li>
            <% } %>
            <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
            <% if (i == current) { %>
            <li class="active"><a><%= i %></a></li>
            <% } else { %>
            <li><a href="/products/gifts?page=<%= i %><%if(search){%>&search=<%=search%><%}%>"><%= i %></a></li>
            <% } %>
            <% if (i == Number(current) + 4 && i < pages) { %>
            <li class="disabled"><a>...</a></li>
            <% } %>
            <% } %>
     
            <% if (current == pages) { %>
            <li class="disabled"><a>»</a></li>
            <% } else { %>
            <li><a href="/products/gifts?page=<%= Number(current) + 1 %><%if(search){%>&search=<%=search%><%}%>">»</a></li>
            <% } %>
     
            <% if (current == pages) { %>
            <li class="disabled"><a>Last</a></li>
            <% } else { %>
            <li><a href="/products/gifts?page=<%= pages %><%if(search){%>&search=<%=search%><%}%>">Last</a></li>
            <% } %>
        </ul>
        <% } %>
    </div>
    <div class="row text-center" style="display: flex; flex-wrap: wrap;">
        <% products.forEach(function(product){ %>
            <% if(product.productType === "gifts") {%>
                <div class="col-md-6">
                    <div class="thumbnail crop">
                        <img id="crop" src="<%= product.image %>">
                        <div class="caption">
                            <h2><%= product.name %></h2>
                            <h3>$<%= product.price %></h3>
                            
                        </div>
                        <div id="marginBottom">
                            <a id="viewBtn" class="btn btn-primary" href="/products/gifts/<%= product._id %>">View More</a>
                            <a class="btn btn-primary" href="/products/gifts/add-to-cart/<%= product.id %>" role="button">Add to Cart</a>   
                        </div>
                    </div> 
                </div>
            <% } %>
    
        <% }) %>
    </div>





<% include ../../partials/footer %>